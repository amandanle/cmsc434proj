<!doctype html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <script src="https://kit.fontawesome.com/25e0395ca2.js" crossorigin="anonymous"></script>
    <script src ="js.js">
    </script>
    <!--feel free to change icons by browsing fontawesome above^^-->

    <meta charset="UTF-8">
    <link rel="stylesheet" href="inventory.css">
    <title>Inventory Page</title>
</head>


<body class = "active" onload="main()">
<div class="wrapper">

    <div class="tab">
      <button class="tablinks" > <a href="home.html" > Home </a></button>
      <button class="tablinks" > <a href="recipes.html" > Search Recipes </a></button>
      <button class="tablinks" > <a href="shoppingList.html" > Shopping List </a></button>
      <button class="tablinks" > <a href="inventory.html" > Inventory </a></button>
    </div>
    <div class="section">
        <div class="top_navbar">
            <!--Put title of page here!-->
            <div class="title">
                Inventory
            </div>
        </div>
    </div>
</div>
</body>
</html>

<div class="show">
  <span onclick="addItem()" id="addBtn" class="addBtn">Add</span>
</div>


<div class="hide" id="addItem">
  <table> 
  <tr> 
    <td> 
      <label for="food-input">Item Name: </label>
    </td>
    <td> 
      <input type="text" id="food-input" placeholder="Enter a food...">
    </td>
  </tr>
  <tr> 
    <td>
      <label> Purchased: </label>
    </td>
    <td>
    <label>
      <span id='purchased-date'></span>
      <script> 
        n =  new Date();
        y = n.getFullYear();
        m = n.getMonth() + 1;
        d = n.getDate();
        document.getElementById("purchased-date").innerHTML = m + "-" + d + "-" + y;
        </script>
    </label>
    </td>
  </tr>
  <tr> 
      <td> 
        <label for="quantity">Quantity: </label>
      </td>
      <td> 
        <input type="text" id="quantity" placeholder="How many... ">
      </td>
    </tr>
    <td> 
      <label for="expiration">Best By:</label>
    </td>
    <td> 
      <input type="date" id="expir-date" name="expir-date">
    </td>
  </tr>
  <tr> 
    <td> <span onclick="closeAdding()" class="closeBtn">Close</span> </td>
    <td> <span onclick="newItem()" class="finishBtn">Finish</span></td>
  </tr>
  </table>
</div>
<!-- ITEM INFO -->



<ol id="foodItems">
`       <li>Food: Canned Beans Quantity: 12 cans Expiration Date: 04/21/2025</li>
</ol>




<!-- FUNCTIONS  -->
<script type="text/javascript">


  function hideAdd() {
      var x = document.getElementById("addBtn");
      var y = document.getElementById("foodItems");
      if (x.style.display != "none" || y.style.display != "none") {
          x.style.display = "none";
          y.style.display = "none";
      } else {
          x.style.display = "block";
          y.style.display = "block";
      }
  }



  const foodItems = new Map();
    // Create a "close" button and append it to each list item
    var myNodelist = document.getElementById("foodItems").getElementsByTagName("li");
    var i;
    for (i = 0; i < myNodelist.length; i++) {
      var span = document.createElement("SPAN");
      var txt = document.createTextNode("\u00D7");
      span.className = "close";
      span.appendChild(txt);
      myNodelist[i].appendChild(span);
   }

   var close = document.getElementsByClassName("close");
    var i;
    for (i = 0; i < close.length; i++) {
      close[i].onclick = function() {

      var div = this.parentElement;
      div.style.display = "none";
    }
  }



function addItem(){
    var x = document.getElementById("addItem");
    if (x.style.display === "none") {
      var hide = document.getElementById("foodItems");
      hide.style.display = "none";
      document.getElementById('addBtn').style.display='none';
      x.style.display = "block";
    } else {
      x.style.display = "none";
    }
  }





  function closeAdding(){
    document.getElementById('addBtn').style.display='block';
    document.getElementById("addItem").style.display = 'none';
    var hide = document.getElementById("foodItems");
    hide.style.display = "block";
  }





  function newItem() {
    var x = document.getElementById("addItem");
    x.style.display = "none";
    var li = document.createElement("li");
    /*Getting item info*/
    var inputValue = document.getElementById("food-input").value;
    var quantity = document.getElementById("quantity").value;
    var purDate = document.getElementById("purchased-date").innerText;
    var expirDate = document.getElementById("expir-date").value;
    var currInfo = [purDate, quantity, expirDate];
    foodItems.set(inputValue, currInfo);
    /* Adding a new item to the list */
    var t = document.createTextNode("Food: " + inputValue + " Quantity: " + quantity + " Expiration Date: " + expirDate);
    li.appendChild(t);
    if (expirDate === '') {
      document.getElementById("expir-date").value = "None";
    }
    if (inputValue === '' || quantity === '') {
    alert("You must write something!");
    x.style.display = "block";
    } else {
      var hide = document.getElementById("foodItems");
      hide.style.display = "block";
      document.getElementById("foodItems").appendChild(li);
      document.getElementById('addBtn').style.display="block";
    }
    document.getElementById("food-input").value = "";
    document.getElementById("quantity").value = "";
    var span = document.createElement("SPAN");
    var txt = document.createTextNode("\u00D7");
    span.className = "close";
    span.appendChild(txt);
    li.appendChild(span);

    for (i = 0; i < close.length; i++) {
        close[i].onclick = function() {
        var div = this.parentElement;
        div.style.display = "none";
      }
    }
  }







</script>
</head>
</html>