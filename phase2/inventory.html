<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://kit.fontawesome.com/25e0395ca2.js" crossorigin="anonymous"></script>
    <script src ="js.js">
    </script>
    <!--feel free to change icons by browsing fontawesome above^^-->

    <meta charset="UTF-8">
    <link rel="stylesheet" href="css.css">
    <title>Find a Suggested Recipe!</title>
</head>

<div class="logotop">
    <a href="home.html" > <img src="logos/kk_full_blue.png" alt="KitchenKompanion"></a>
</div>

<body class = "active" onload="main()">
<div class="wrapper">
<!--    tabs!!-->
    <div class="tab">
        <button class="tablinks" > <a href="home.html" > Home </a></button>
        <button class="tablinks" > <a href="recipes.html" > Search Recipes </a></button>
        <button class="tablinks" > <a href="shoppingList.html" > Shopping List </a></button>
        <button class="tablinks" > <a href="inventory.html" > Inventory </a></button>
    </div>
    <div class="section">
        <div class="top_navbar">
            <div class="title">
                Inventory
            </div>
        </div>
    </div>
</div>


<!-- inventory stuff -->




<div id = "empty-list">
    Your Inventory is Empty, click the Add Item button to add an item to your inventory.
</div>



<div class= "hide" id="addItem">
  <table> 
  <tr> 
    <td> 
      <label for="food-input">Item Name: </label>
    </td>
    <td> 
      <input type="text" id="food-input" placeholder="Enter a food item">
    </td>
  </tr>

  <tr> 
    <td>
      <label> Purchased: </label>
    </td>
    <td>
    <label>
      <span id='purchased-date'></span>
      <script> 
        n =  new Date();
        y = n.getFullYear();
        m = n.getMonth() + 1;
        d = n.getDate();
        document.getElementById("purchased-date").innerHTML = m + "-" + d + "-" + y;
        </script>
    </label>
    </td>
  </tr>

  <tr> 
      <td> 
        <label for="quantity">Quantity: </label>
      </td>
      <td> 
        <input type="text" id="quantity" placeholder="Enter a quantity">
      </td>
    </tr>

    <td> 
      <label for="expiration">Best By:</label>
    </td>
    <td> 
      <input type="date" id="expir-date" name="expir-date">
    </td>
  </tr>

  <tr> 
    <td> <span onclick="closeAdd()" class="closeBtn">Close</span> </td>
    <td> <span onclick="newItemInfo()" class="finishBtn">Add</span></td>
  </tr>
  </table>
</div>






<ol id="foodItems">

</ol>

<div>
  <span onclick="addItem()" id="addBtn" class="addBtn">Add Item</span>
</div>



        <div class='hide' id='itemInfo'> 
        <table> 
          <tr>
            <td> <label for="food-input">Item Name: </label></td>
            <td> <span id='item-name-info'> </span> </td> 
          </tr> 
          <tr>
            <td> <label for="food-input">Purchased: </label></td>
            <td> <span id='purchased-date-info'> </span> </td> 
          </tr> 
          <tr>
            <td> <label for="food-input">Quantity: </label></td>
            <td><span id='amount'> </span>
            </td> 
          </tr> 
          <tr>
            <td> <label for="food-input">Best By: </label></td>
            <td><span id='item-expir-date-info'> </span> </td> 
          </tr> 
          <tr> 
            <td><span class="editBtn" onClick="editButtonAlert()">Edit</span></td>
            <td padding="100px"> <span onclick="closeInfo()" class="closeBtn">Close</span> </td>
          </tr>
        </table>
        </div>


<!-- FUNCTIONS  -->
<script type="text/javascript">



function closeInfo(){
          var x = document.getElementById("itemInfo");
          x.style.display = "none";

          var y = document.getElementById("addBtn");
          y.style.display = "block";
        }



        var list = document.querySelector('ol');
        list.addEventListener('click', function(ev) {
        if (ev.target.tagName === 'LI') {
          var x = document.getElementById("addBtn");
          x.style.display = "none";



          var itemName = ev.target.innerHTML;
          itemName = itemName.split("<")[0];
          var currInfo = foodItems.get(itemName);
          document.getElementById('item-name-info').innerText = itemName;
          document.getElementById('purchased-date-info').innerText = currInfo[0];
          document.getElementById('amount').innerText = currInfo[1];
          if (currInfo[2] != "") {
          var year = currInfo[2].split("-")[0];
          var month = currInfo[2].split("-")[1];
          var day = currInfo[2].split("-")[2];
          document.getElementById('item-expir-date-info').innerText = month + "-" + day + "-" + year;
          }
          
          document.getElementById('itemInfo').style.display="block";
        }
        }, false);


  function hideAdd() {
      var x = document.getElementById("addBtn");
      var y = document.getElementById("foodItems");
      if (x.style.display != "none" || y.style.display != "none") {
          x.style.display = "none";
          y.style.display = "none";
      } else {
          x.style.display = "block";
          y.style.display = "block";
      }
  }



  const foodItems = new Map();
    // Create a "close" button and append it to each list item
    var myNodelist = document.getElementById("foodItems").getElementsByTagName("li");
    var i;
    for (i = 0; i < myNodelist.length; i++) {
      var span = document.createElement("SPAN");
      var txt = document.createTextNode("\u00D7");
      span.className = "close";
      span.appendChild(txt);
      myNodelist[i].appendChild(span);
   }

   var close = document.getElementsByClassName("close");
    var i;
    for (i = 0; i < close.length; i++) {
      close[i].onclick = function() {
        var x = document.getElementById("itemInfo");
            x.style.display = "none";
      var div = this.parentElement;
      div.style.display = "none";
    }
  }



function addItem(){
    var x = document.getElementById("addItem");
    if (x.style.display !== "block") {
      x.style.display = "block";
      var hide = document.getElementById("foodItems");
      hide.style.display = "none";
      hide = document.getElementById("empty-list");
      hide.style.display = "none";
      var y = document.getElementById('addBtn');
      y.style.display = "none";
    } else {
      x.style.display = "none";
    }
  }





  function closeAdd(){
    document.getElementById('addBtn').style.display='block';
    document.getElementById("addItem").style.display = 'none';
    var hide = document.getElementById("foodItems");
    hide.style.display = "block";
  }





  function newItemInfo() {
    var x = document.getElementById("addItem");
    x.style.display = "none";
    var li = document.createElement("li");
    var inputValue = document.getElementById("food-input").value;
    var quantity = document.getElementById("quantity").value;
    var purDate = document.getElementById("purchased-date").innerText;
    var expirDate = document.getElementById("expir-date").value;
    var currInfo = [purDate, quantity, expirDate];
    foodItems.set(inputValue, currInfo);
    var t = document.createTextNode(inputValue);
    li.appendChild(t);
    if (inputValue === '' || quantity === '') {
    alert("You must write something!");
    x.style.display = "block";
    } else {
      var hide = document.getElementById("foodItems");
      hide.style.display = "block";
      document.getElementById("foodItems").appendChild(li);
      document.getElementById('addBtn').style.display="block";
    }
    document.getElementById("food-input").value = "";
    document.getElementById("quantity").value = "";
    var span = document.createElement("SPAN");
    var txt = document.createTextNode("\u00D7");
    span.className = "close";
    span.appendChild(txt);
    li.appendChild(span);

    for (i = 0; i < close.length; i++) {
        close[i].onclick = function() {
        var div = this.parentElement;
        div.style.display = "none";
      }
    }
  }



</script>
</head>
</html>